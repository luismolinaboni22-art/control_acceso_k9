<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <title>Reportes - K9</title>
</head>
<body>
    <h1>Reportes de Visitantes</h1>
    <a href="{{ url_for('index') }}">Volver al Dashboard</a>

    <form method="GET">
        <label>Nombre:</label>
        <input type="text" name="nombre" value="{{ nombre }}">
        <label>Empresa:</label>
        <input type="text" name="empresa" value="{{ empresa }}">
        <label>Desde:</label>
        <input type="datetime-local" name="desde" value="{{ desde }}">
        <label>Hasta:</label>
        <input type="datetime-local" name="hasta" value="{{ hasta }}">
        <button type="submit">Filtrar</button>
        <a href="{{ url_for('reports', nombre=nombre, empresa=empresa, desde=desde, hasta=hasta, export='true') }}">Exportar CSV</a>
    </form>

    <table border="1">
        <tr>
            <th>Nombre</th>
            <th>Empresa</th>
            <th>Hora Entrada</th>
            <th>Hora Salida</th>
        </tr>
        {% for v in visitantes %}
        <tr>
            <td>{{ v.nombre }}</td>
            <td>{{ v.empresa }}</td>
            <td>{{ v.hora_entrada.strftime('%Y-%m-%d %H:%M:%S') }}</td>
            <td>{{ v.hora_salida.strftime('%Y-%m-%d %H:%M:%S') if v.hora_salida else '' }}</td>
        </tr>
        {% endfor %}
    </table>
</body>
</html>
